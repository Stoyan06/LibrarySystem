@using LibrarySystem.Models
@using LibrarySystem.Utility
@model LibraryUnitViewModel

@{
    ViewData["Title"] = "Детайли за библиотечна единица";
}

<head>
    <title>@ViewData["Title"] - Библиотечна система</title>
    <style>
        .card {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .card-img-top {
            height: 250px;
            object-fit: cover;
        }

        .zoomable-img {
            cursor: pointer;
        }

        .details-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Responsive Design */
        @@media (min-width: 768px) {
            .details-section {
                flex-direction: row;
                justify-content: space-between;
            }

            .details-section .left, .details-section .right {
                flex: 1;
            }
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        .image-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .form-control-static {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>

<h1 class="mb-4 text-center">Детайли за библиотечна единица</h1>

<div class="details-section mx-auto w-100 p-4">
    <!-- Image Preview (Left Side) -->
    <div class="left image-container">
        @if (!string.IsNullOrEmpty(Model.Image.DestinationLink))
        {
            <div class="position-relative">
                <img src="@Model.Image.DestinationLink" id="imagePreview" class="img-thumbnail zoomable-img" alt="Изображение на библиотечната единица" style="max-width: 250px;" onclick="zoomImage()">
                <small class="d-block mt-1">Изображение на библиотечната единица</small>
            </div>
        }
    </div>

    <!-- Details (Right Side) -->
    <div class="right w-100 bg-light rounded p-4 shadow-sm">
        <!-- Inventory Number -->
        <div class="mb-3">
            <label class="form-label fw-bold">Инвентарен номер</label>
            <p class="form-control-static">@Model.InventoryNumber</p>
        </div>

        <!-- Condition -->
        <div class="mb-3">
            <label class="form-label fw-bold">Състояние</label>
            <p class="form-control-static">@Model.Condition</p>
        </div>

        <!-- Medium -->
        <div class="mb-3">
            <label class="form-label fw-bold">Носител</label>
            <p class="form-control-static">@Model.Medium</p>
        </div>

        <!-- Title -->
        <div class="mb-3">
            <label class="form-label fw-bold">Заглавие</label>
            <p class="form-control-static">@Model.TitleName</p>
        </div>

        <!-- ISBN -->
        @if (!string.IsNullOrEmpty(Model.Isbn))
        {
            <div class="mb-3">
                <label class="form-label fw-bold">ISBN</label>
                <p class="form-control-static">@Model.Isbn</p>
            </div>
        }

        <!-- Type Library Unit -->
        <div class="mb-3">
            <label class="form-label fw-bold">Тип</label>
            <p class="form-control-static">@Model.TypeLibraryUnit</p>
        </div>

        <!-- Year -->
        @if (Model.Year.HasValue)
        {
            <div class="mb-3">
                <label class="form-label fw-bold">Година</label>
                <p class="form-control-static">@Model.Year</p>
            </div>
        }

        <!-- Publishing House -->
        @if (!string.IsNullOrEmpty(Model.PublishingHouse))
        {
            <div class="mb-3">
                <label class="form-label fw-bold">Издателство</label>
                <p class="form-control-static">@Model.PublishingHouse</p>
            </div>
        }

        <!-- Buttons -->
        <div class="d-flex justify-content-between mt-4">
            <a asp-action="AllLibraryUnits" class="btn btn-secondary btn-lg px-4">Назад</a>
        </div>

        @if (User.IsInRole(SD.UserRole))
        {
            <a href="@Url.Action("Reserve", "LibraryUnit", new { id = Model.Id })" class="btn btn-success">Резервирай</a>
        }
    </div>
</div>

<!-- JavaScript for Zoom Feature -->
<script>
    function zoomImage() {
        var imgSrc = document.getElementById("imagePreview").src;
        if (imgSrc) {
            var zoomWindow = window.open("", "_blank");
            zoomWindow.document.write('<img src="' + imgSrc + '" style="width: 100%; height: auto;">');
        }
    }
</script>
